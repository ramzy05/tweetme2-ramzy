{"ast":null,"code":"import _toConsumableArray from\"C:/Users/HP USER/Documents/R/PROJECTS/Dev/tweetme2/tweetme2-web/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/HP USER/Documents/R/PROJECTS/Dev/tweetme2/tweetme2-web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useRef}from'react';import{loadTweets}from'../lookup';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function TweetsComponent(props){// const textAreaRef =  React.createRef()\nvar textAreaRef=useRef(null);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),newTweets=_useState2[0],setNewTweets=_useState2[1];var handleSubmit=function handleSubmit(event){event.preventDefault();var newValue=textAreaRef.current.value;var tempNewTweets=_toConsumableArray(newTweets);// change this to a server side call\ntempNewTweets.unshift({content:newValue,likes:0,id:12313});setNewTweets(tempNewTweets);textAreaRef.current.value='';};return/*#__PURE__*/_jsxs(\"div\",{className:props.className,children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"textarea\",{ref:textAreaRef,required:true,className:\"form-control\",name:\"tweet\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary my-3\",children:\"Tweet\"})]})}),/*#__PURE__*/_jsx(TweetsList,{newTweets:newTweets})]});}export function TweetsList(props){var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tweetsInit=_useState4[0],setTweetsInit=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),tweets=_useState6[0],setTweets=_useState6[1];// setTweetsInit([...props.newTweets].concat(tweetsInit))\nuseEffect(function(){// setTweetsInit([...props.newTweets].concat(tweetsInit))\nvar final=_toConsumableArray(props.newTweets).concat(tweetsInit);if(final.length!==tweets.length){setTweets(final);}},[props.newTweets,tweets,tweetsInit]);useEffect(function(){var myCallback=function myCallback(response,status){if(status===200){setTweetsInit(response);}else{alert('There was an error');}};loadTweets(myCallback);},[]);return tweets.map(function(item,index){return/*#__PURE__*/_jsx(Tweet,{tweet:item,className:\"my-5 py-5 border bg-white text-dark\"},\"\".concat(index,\"-\").concat(item.id));});}export function ActionBtn(props){var tweet=props.tweet,action=props.action;var _useState7=useState(tweet.likes?tweet.likes:0),_useState8=_slicedToArray(_useState7,2),likes=_useState8[0],setLikes=_useState8[1];var _useState9=useState(tweet.userLike===true?true:false),_useState10=_slicedToArray(_useState9,2),userLike=_useState10[0],setUserLike=_useState10[1];var className=props.className?props.className:'btn btn-primary btn-sm';var actionDisplay=action.display?action.display:'Action';var handleClick=function handleClick(event){event.preventDefault();if(action.type==='like'){if(userLike===true){// perhaps i Unlike it?\nsetLikes(likes-1);setUserLike(false);}else{setUserLike(true);setLikes(likes+1);}}};var display=action.type==='like'?\"\".concat(likes,\" \").concat(actionDisplay):actionDisplay;return/*#__PURE__*/_jsx(\"button\",{className:className,onClick:handleClick,children:display});}export function Tweet(props){var tweet=props.tweet;var className=props.className?props.className:'col-10 mx-auto col-md-6';return/*#__PURE__*/_jsxs(\"div\",{className:className,children:[/*#__PURE__*/_jsxs(\"p\",{children:[tweet.id,\" - \",tweet.content]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",children:[/*#__PURE__*/_jsx(ActionBtn,{tweet:tweet,action:{type:'like',display:'Likes'}}),/*#__PURE__*/_jsx(ActionBtn,{tweet:tweet,action:{type:'unlike',display:'Unlikes'}}),/*#__PURE__*/_jsx(ActionBtn,{tweet:tweet,action:{type:'retweet'}})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","loadTweets","TweetsComponent","props","textAreaRef","newTweets","setNewTweets","handleSubmit","event","preventDefault","newValue","current","value","tempNewTweets","unshift","content","likes","id","className","TweetsList","tweetsInit","setTweetsInit","tweets","setTweets","final","concat","length","myCallback","response","status","alert","map","item","index","ActionBtn","tweet","action","setLikes","userLike","setUserLike","actionDisplay","display","handleClick","type","Tweet"],"sources":["C:/Users/HP USER/Documents/R/PROJECTS/Dev/tweetme2/tweetme2-web/src/tweets/components.js"],"sourcesContent":["import React, {useEffect, useState, useRef} from 'react'\r\nimport { loadTweets } from '../lookup'\r\n\r\n\r\nexport function TweetsComponent(props){\r\n    // const textAreaRef =  React.createRef()\r\n    const textAreaRef =  useRef(null)\r\n    const [newTweets, setNewTweets] = useState([])\r\n    const handleSubmit = (event) =>{\r\n        event.preventDefault()\r\n        const newValue = textAreaRef.current.value\r\n        let tempNewTweets = [...newTweets]\r\n        // change this to a server side call\r\n        tempNewTweets.unshift({\r\n            content:newValue,\r\n            likes:0,\r\n            id:12313\r\n        })\r\n        setNewTweets(tempNewTweets)\r\n        textAreaRef.current.value = ''\r\n    } \r\n    return <div className={props.className}>\r\n        <div className='col-12 mb-3'>\r\n                <form  action=\"\" onSubmit={handleSubmit}>\r\n                    <textarea ref={textAreaRef} required={true} className='form-control' name=\"tweet\">\r\n\r\n                    </textarea>\r\n                    <button type=\"submit\" className='btn btn-primary my-3'>Tweet</button>\r\n                </form>\r\n        </div>\r\n        <TweetsList newTweets = {newTweets} />\r\n    </div>\r\n}\r\n\r\n export function TweetsList(props) {\r\n    const [tweetsInit, setTweetsInit] = useState([])\r\n    const [tweets, setTweets] = useState([])\r\n    // setTweetsInit([...props.newTweets].concat(tweetsInit))\r\n    \r\n    useEffect(() => {\r\n        // setTweetsInit([...props.newTweets].concat(tweetsInit))\r\n        let final = [...props.newTweets].concat(tweetsInit)\r\n        if (final.length !== tweets.length){\r\n            setTweets(final)\r\n        }\r\n    }, [props.newTweets, tweets,tweetsInit])\r\n\r\n    useEffect(() => {\r\n      const myCallback = (response, status) => { \r\n        if(status === 200){\r\n          setTweetsInit(response)\r\n        }else{\r\n          alert('There was an error')\r\n        }\r\n      }\r\n      loadTweets(myCallback)\r\n    }, [])\r\n    return tweets.map((item, index) =>{\r\n      return <Tweet tweet={item} className='my-5 py-5 border bg-white text-dark' key={`${index}-${item.id}`}/>\r\n    } )\r\n  }\r\n\r\nexport function ActionBtn(props){\r\n    const {tweet, action} = props\r\n    const [likes, setLikes] = useState(tweet.likes ? tweet.likes : 0)\r\n    const [userLike, setUserLike]= useState(tweet.userLike === true ? true : false)\r\n    const className = props.className ? props.className : 'btn btn-primary btn-sm'\r\n    const actionDisplay = action.display ? action.display : 'Action'\r\n    const handleClick = (event) =>{\r\n        event.preventDefault()\r\n        if (action.type === 'like'){\r\n            if(userLike === true){\r\n                // perhaps i Unlike it?\r\n                setLikes(likes-1)\r\n                setUserLike(false)\r\n            }else{\r\n                setUserLike(true)\r\n                setLikes(likes+1)\r\n            }\r\n        }\r\n    } \r\n    const display = action.type === 'like' ? `${likes} ${actionDisplay}` : actionDisplay\r\n    return  <button className={className} onClick={handleClick}>{display}</button>\r\n  } \r\n  \r\nexport  function Tweet(props){\r\n    const {tweet} = props\r\n    const className = props.className ? props.className : 'col-10 mx-auto col-md-6'\r\n    return <div className={className}>\r\n        <p>{tweet.id} - {tweet.content}</p>\r\n        <div className='btn-group'>\r\n          <ActionBtn tweet={tweet} action={{type:'like', display:'Likes'}}/>\r\n          <ActionBtn tweet={tweet} action={{type:'unlike', display:'Unlikes'}}/>\r\n          <ActionBtn tweet={tweet} action={{type:'retweet'}}/>\r\n        </div>\r\n    </div>\r\n  }"],"mappings":"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"},"metadata":{},"sourceType":"module"}